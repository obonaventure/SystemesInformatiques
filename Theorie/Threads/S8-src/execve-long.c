/**************************************
 * execve-long.c
 *
 * Programme d'exemple pour execve
 *
 *************************************/

///AAA
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>

extern char **environ;

int main (int argc, char *argv[])  {

  if(argc==1) {
    fprintf(stderr,"Erreur, nom de l'exécutable nécessaire\n");
    return(EXIT_FAILURE);
  }

  int err=execve(argv[1], &(argv[1]), environ);
  if(err!=0) {
    fprintf(stderr,"Impossible d'exécuter %s, erreur %d %s\n",argv[1],err, strerror(errno));
    exit(EXIT_FAILURE);
  }
  return(EXIT_SUCCESS);

}

